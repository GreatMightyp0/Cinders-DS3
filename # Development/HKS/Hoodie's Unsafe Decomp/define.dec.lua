function ()
TRUE = 1
FALSE = 0
INVALID = -1
PLAYER_STATE_IDLE = 0
PLAYER_STATE_MOVE = 1
LOCOMOTION_STATE_MOVE = 0
LOCOMOTION_STATE_GUARD = 1
STAMINA_MINIMUM = 10
STAMINA_REDUCE_ROLLING = -10
SPEED_ENABLE_JUMP = 1.100000023841858
DOWN_NONE = -1
DOWN_NOW = 0
DOWN_FINISH = 1
LAND_DEFAULT = 0
LAND_MIDDLE = 1
LAND_HEAVY = 2
LAND_CAT_DEFAULT = 3
LAND_CAT_MIDDLE = 4
LAND_CAT_HEAVY = 5
LAND_JUMP = 6
FALL_DEFAULT = 0
FALL_ATTACK = 1
MOVE_STATE_NONE = -1
MOVE_STATE_WALK = 0
MOVE_STATE_RUN = 1
MOVE_STATE_DASH = 2
GUARD_STATE_START = 0
GUARD_STATE_IDLE = 1
GUARD_STATE_END = 2
GUARD_INDEX_IDLE = 0
GUARD_INDEX_MOVE = 1
ACTION_ARM_R1 = 0
ACTION_ARM_R2 = 1
ACTION_ARM_L1 = 2
ACTION_ARM_L2 = 3
ACTION_ARM_ACTION = 4
ACTION_ARM_SP_MOVE = 5
ACTION_ARM_CHANGE_STYLE = 6
ACTION_ARM_USE_ITEM = 7
ACTION_ARM_SWITCH_FORM = 8
ACTION_ARM_CHANGE_WEAPON_R = 9
ACTION_ARM_CHANGE_WEAPON_L = 10
ACTION_ARM_CHANGE_ITEM = 11
ACTION_ARM_BACKSTEP = 12
ACTION_ARM_ROLLING = 13
ACTION_ARM_GESTURE = 15
ITEM_RECOVER = 0
ITEM_WEAPON_ENCHANT = 1
ITEM_THROW_KNIFE = 2
ITEM_THROW_BOTTLE = 3
ITEM_MEGANE = 4
ITEM_REPAIR = 5
ITEM_PRAY = 6
ITEM_TRAP = 7
ITEM_MESSAGE = 8
ITEM_SOUL = 9
ITEM_DRINK = 10
ITEM_DRAGON_HEAD = 11
ITEM_DRAGON_BODY = 12
ITEM_PRAY2 = 13
ITEM_SHOCK_WAVE = 14
ITEM_NO_DRINK = 254
ITEM_INVALID = 255
MAGIC_REQUEST_ENBULLET = 0
MAGIC_REQUEST_WEAPON_ENCHANT = 1
MAGIC_REQUEST_NOTHING = -1
MAGIC_REQUEST_INVALID = 125
LADDER_ACTION_INVALID = -1
LADDER_ACTION_START_BOTTOM = 0
LADDER_ACTION_START_TOP = 1
LADDER_ACTION_UP_RIGHT = 2
LADDER_ACTION_UP_LEFT = 3
LADDER_ACTION_DOWN_RIGHT = 4
LADDER_ACTION_DOWN_LEFT = 5
LADDER_ACTION_END_TOP = 6
LADDER_ACTION_END_BOTTOM = 7
LADDER_ACTION_IDLE_RIGHT = 8
LADDER_ACTION_IDLE_LEFT = 9
LADDER_ACTION_ATTACK_UP_RIGHT = 10
LADDER_ACTION_ATTACK_UP_LEFT = 11
LADDER_ACTION_ATTACK_DOWN_RIGHT = 12
LADDER_ACTION_ATTACK_DOWN_LEFT = 13
LADDER_ACTION_COAST_START_RIGHT = 14
LADDER_ACTION_COAST_RIGHT = 15
LADDER_ACTION_COAST_LANDING = 20
LADDER_HAND_NOTHING = -1
LADDER_HAND_RIGHT = 0
LADDER_HAND_LEFT = 1
LADDER_CALL_UP = 0
LADDER_CALL_DOWN = 1
LADDER_CALL_NONE = -1
HAND_STATE_RIGHT = 0
HAND_STATE_LEFT = 1
THROW_TYPE_DEATH = 6
THROW_TYPE_INVALID = 0
HAND_RIGHT = 1
HAND_LEFT = 0
HAND_LEFT_BOTH = 2
HAND_RIGHT_BOTH = 3
HAND_BOTH = 4
HAND_CONDITION_SINGLE = 1
HAND_CONDITION_BOTH = 2
LEG_BOTH = -1
LEG_LEFT = 0
LEG_RIGHT = 1
WEAPON_CHANGE_REQUEST_NOTHING = -1
WEAPON_CHANGE_REQUEST_RIGHT_WAIST = 0
WEAPON_CHANGE_REQUEST_RIGHT_BACK = 1
WEAPON_CHANGE_REQUEST_RIGHT_SHOULDER = 2
WEAPON_CHANGE_REQUEST_RIGHT_SPEAR = 3
WEAPON_CHANGE_REQUEST_LEFT_WAIST = 4
WEAPON_CHANGE_REQUEST_LEFT_BACK = 5
WEAPON_CHANGE_REQUEST_LEFT_SHOULDER = 6
WEAPON_CHANGE_REQUEST_LEFT_SPEAR = 7
WEAPON_CATEGORY_SPEAR = 36
WEAPON_CATEGORY_STAFF = 41
WEAPON_CATEGORY_FIST_CUT = 43
WEAPON_CATEGORY_SMALL_ARROW = 44
WEAPON_CATEGORY_LARGE_ARROW = 45
WEAPON_CATEGORY_SMALL_SHIELD = 47
WEAPON_CATEGORY_LARGE_SHIELD = 48
WEAPON_CATEGORY_TOCHE = 49
GUARD_DAMAGE_GURDED = 1000
GUARD_DAMGE_GUARDBREAK = 1001
GUARD_DAMGE_BACK = 1002
GUARD_DAMAGE_GURDED_LEFT = 1003
GUARD_DAMAGE_GUARDBREAK_BLAST = 1004
GUARD_DAMAGE_GUARDBREAK_FLING = 1005
GUARD_DAMAGE_WALL_RIGHT = 1006
GUARD_DAMAGE_WALL_LEFT = 1007
DAMAGE_TYPE_PARRY = 5
DAMAGE_LEVEL_SMALL = 1
DAMAGE_LEVEL_MIDDLE = 2
DAMAGE_LEVEL_LARGE = 3
DAMAGE_LEVEL_EXLARGE = 4
DAMAGE_LEVEL_PUSH = 5
DAMAGE_LEVEL_FLING = 6
DAMAGE_LEVEL_SMALL_BLOW = 7
DAMAGE_LEVEL_MINIMUM = 8
DAMAGE_LEVEL_BLAST = 9
DAMAGE_LEVEL_BREATH = 11
DEATH_TYPE_COMMON = 0
DEATH_TYPE_COMMON_BACK = 1
DEATH_TYPE_SMALL_BLAST = 2
DEATH_TYPE_BLAST = 3
DEATH_TYPE_LADDER = 4
DEATH_TYPE_STONE = 5
DEATH_TYPE_FLING = 6
DEATH_TYPE_WEAK = 7
DEATH_TYPE_BLAST = 5
CONDITION_TYPE_CHANGE = 96
CONDITION_TYPE_CURSE = 116
CONDITION_TYPE_STONE = 117
CONDITION_TYPE_CRYSTAL = 136
CONDITION_TYPE_UNDEAD = 143
CONDITION_TYPE_FAKE_DEATH = 144
CONDITION_TYPE_SAINT = 146
CONDITION_TYPE_NO_EST = 154
CONDITION_TYPE_ALL_CHANGE = 167
CONDITION_TYPE_EGG = 192
CONDITION_TYPE_COLLUSIUM = 233
ATTACK_TYPE_INVALID = -1
ATTACK_TYPE_DEFAULT = 0
ATTACK_TYPE_LARGE = 1
ATTACK_TYPE_BOTH_DEFAULT = 2
ATTACK_TYPE_BOTH_LARGE = 3
ATTACK_TYPE_WEAK = 4
ATTACK_TYPE_NEAR = 5
ATTACK_TYPE_FAR = 6
ATTACK_TYPE_BOTH_NEAR = 7
ATTACK_TYPE_BOTH_FAR = 8
ATTACK_TYPE_AFTER_PARRY = 9
ATTACK_TYPE_BACK = 10
ATTACK_TYPE_GUARD = 11
ATTACK_TYPE_PARRY = 12
ATTACK_REQUEST_ROLLING = 11
ATTACK_REQUEST_BACKSTEP = 12
ATTACK_REQUEST_JUMP = 13
ATTACK_REQUEST_INVALID = -1
ATTACK_REQUEST_RIGHT_LIGHT = 0
ATTACK_REQUEST_RIGHT_HEAVY = 1
ATTACK_REQUEST_BOTH_LIGHT = 2
ATTACK_REQUEST_BOTH_HEAVY = 3
ATTACK_REQUEST_LIGHT_KICK = 4
ATTACK_REQUEST_HEAVY_KICK = 5
ATTACK_REQUEST_LEFT_LIGHT = 6
ATTACK_REQUEST_LEFT_HEAVY = 7
ATTACK_REQUEST_ARROW_CHANGE = 8
ATTACK_REQUEST_ARROW_CHANGE2 = 9
ATTACK_REQUEST_ARROW_FIRE = 10
ATTACK_REQUEST_ATTACK_WHILE_GUARD = 11
ATTACK_REQUEST_LEFT_BASH = 12
ATTACK_REQUEST_LEFT_PARRY = 13
ATTACK_REQUEST_ARROW_CHANGE_RIGHT = 14
ATTACK_REQUEST_ARROW_CHANGE_LEFT = 15
THROW_STATE_INVALID = 255
THROW_STATE_DEFAULT = 0
THROW_STATE_IDLE = 1
GUARD_STYLE_DEFAULT = 0
GUARD_STYLE_TOCHE = 1
TAE_FLAG_GUARD_CANCEL = 0
TAE_FLAG_DISENABLE_GUARD = 4
TAE_FLAG_STATE_END = 2
TAE_FLAG_WEAPONCHANGE_END = 1
CULT_STATE_IDLE = 1
CULT_STATE_MOVE = 2
CULT_STATE_RELESE = 3
CULT_STATE_FORCE_RELEASE = 4
TRANS_TO_ALL_BODY = "W_Lower"
g_DebugCounter = 0
g_DebugCounterSub = 0
g_FrameCount = 0
g_MoveSpeedLevel = 0
g_MoveSpeedLevelReal = 0
g_IsLockon = false
g_MoveAngle = 0
g_State = PLAYER_STATE_IDLE
g_IsActionRequest = FALSE
g_TimeCheckActionRequest = -1
g_IsGuard = FALSE
g_IsHalfBlend = FALSE
g_IsUseHoldTransition = FALSE
g_TimeMoveStop = -1
g_GuardUpperCondition = 0
g_GuardCondition = 0
g_FallStyle = FALL_DEFAULT
g_IsDown = DOWN_NONE
g_DownTime = -1
g_EventCommand = 0
g_TimeMoveUpdate = -1
g_StateCondition = {}
g_MoveCondition = MOVE_NONE
g_IsGuardEnable = TRUE
g_LadderCondition = -1
g_LadderExitCondition = -1
g_LadderUpOrDown = -1
g_IsLadderUpdate = FALSE
g_IsLadder = FALSE
g_LadderState = -1
g_IsLadderDamage = FALSE
g_IsMagic = FALSE
g_MagicCondition = 0
g_IsForceReturn = FALSE
g_IsJumpFall = FALSE
g_DisableFallAttack = FALSE
g_LegState = LEG_BOTH
g_IsAttackStart = FALSE
g_r1 = nil
g_r2 = nil
g_l1 = nil
g_l2 = nil
g_b1 = nil
g_b2 = nil
MOVE_NONE = -1
MOVE_WALK = 0
MOVE_RUN = 1
MOVE_DASH = 2
STATE_CONDITION_NONE = -1
STATE_CONDITION_MAGIC = 0
MOVE_RATE_DEFAULT = 1.2000000476837158
function IncNum(num)
    local str = nil
    if num < 10 then
        str = "Debug0"
    else
        str = "Debug"
    end
    vector = hkbGetVariable(str .. num)
    vector[0] = vector[0] + 1
    vector[1] = g_FrameCount
    SetVariable(str .. num, vector)
    
end

function DebugPrint(pos, val)
    local str = nil
    if pos < 10 then
        str = "Debug0"
    else
        str = "Debug"
    end
    vector = hkbGetVariable(str .. pos)
    vector[0] = val
    vector[1] = g_FrameCount
    SetVariable(str .. pos, vector)
    
end

function DebugPrintNext(val)
    g_DebugCounter = g_DebugCounter + 1
    if g_DebugCounter > 10 then
        g_DebugCounter = 1
    end
    DebugPrint(g_DebugCounter, val)
    
end

function DebugPrintts(val)
    g_DebugCounterSub = g_DebugCounterSub + 1
    if g_DebugCounterSub > 4 then
        g_DebugCounterSub = 1
        g_DebugCounter = g_DebugCounter + 1
        if g_DebugCounter > 10 then
            g_DebugCounter = 1
        end
    end
    local str = nil
    if g_DebugCounter < 10 then
        str = "Debug0"
    else
        str = "Debug"
    end
    vector = hkbGetVariable(str .. g_DebugCounter)
    vector[g_DebugCounterSub - 1] = val
    SetVariable(str .. g_DebugCounter, vector)
    
end

function PrintString(str)
    act(9000, str)
    
end

MAX_SPEED_LEVEL = 30
MIN_SPEED_LEVEL = 0
SPEED_STATE_START_DASH = 10
SpeedControll = {}
SpeedControll.New = function ()
    local f7143_local0 = {}
    SETFIELD_R1 0 0 -1
    f7143_local0.BeforeSpeed = REG4294967295
    f7143_local0.SpeedLevel = REG4294967295
    f7143_local0.StopCount = REG4294967295
    f7143_local0.MoveCount = REG4294967295
    f7143_local0.DashPenaltyCount = REG4294967295
    f7143_local0.StaminaCount = REG4294967295
    f7143_local0.Slopes = {}
    f7143_local0.Intercepts = {}
    f7143_local0.StatePoints = {}
    f7143_local0.IsDashPenalty = FALSE
    f7143_local0.IsMoveStop = FALSE
    f7143_local0.IsSpeedDown = FALSE
    f7143_local0.DownSpeed = REG4294967295
    f7143_local0.Debug = TRUE
    local f7143_local1 = setmetatable
    local f7143_local2 = f7143_local0
    local f7143_local3 = {}
    f7143_local3.__index = SpeedControll
    f7143_local1(f7143_local2, f7143_local3)
    return f7143_local0
    
end

STAMINA_REDUCE_ON_DASH = -3
SpeedControll.GetSlope = function (self, x1, y1, x2, y2)
    return (y2 - y1) / (x2 - x1)
    
end

SpeedControll.GetIntercept = function (self, x1, y1, x2, y2)
    return y1 - (y1 - y2) / (x1 - x2) * x1
    
end

SpeedControll.SetStatePoints = function (self, ...)
    self.StatePoints = {...}
    for i, j = nil, 1, #self.StatePoints - 3 do
        local f7146_local3 = self.Slopes
        local f7146_local4 = (f7146_local0 - 1) / 2 + 1
        local f7146_local5 = self
        f7146_local3[f7146_local4] = self.GetSlope(f7146_local5, self.StatePoints[f7146_local0], self.StatePoints[f7146_local0 + 1], self.StatePoints[f7146_local0 + 2], self.StatePoints[f7146_local0 + 3])
        f7146_local3 = self.Intercepts
        f7146_local4 = (f7146_local0 - 1) / 2 + 1
        f7146_local5 = self
        f7146_local3[f7146_local4] = self.GetIntercept(f7146_local5, self.StatePoints[f7146_local0], self.StatePoints[f7146_local0 + 1], self.StatePoints[f7146_local0 + 2], self.StatePoints[f7146_local0 + 3])
    end
    
end

SpeedControll.GetSpeed = function (self)
    local i, pos = nil
    for , 1, #self.StatePoints do
        if self.StatePoints[f7147_local0] <= self.SpeedLevel and self.SpeedLevel <= self.StatePoints[f7147_local0 + 2] then
            pos = (f7147_local0 - 1) / 2 + 1
            return self.SpeedLevel * self.Slopes[pos] + self.Intercepts[pos]
        end
    end
    local f7147_local0 = 0
    return f7147_local0
    
end

SpeedControll.GetMoveSpeed = function (self, stick_level)
    local gap = stick_level - self.BeforeSpeed
    local speed = nil
    if stick_level == 0 then
        self.StopCount = self.StopCount + 1
    end
    if gap > 0 then
        self.StopCount = self.StopCount - 1
        if self.StopCount < 0 then
            self.StopCount = REG4294967295
        end
        self.SpeedLevel = self.SpeedLevel + 1
        if self.SpeedLevel > MAX_SPEED_LEVEL then
            self.SpeedLevel = MAX_SPEED_LEVEL
        end
        local f7148_local0 = self
        speed = self.GetSpeed(f7148_local0)
        if stick_level < speed then
            speed = stick_level
            self.SpeedLevel = self.SpeedLevel - 1
        end
        self.BeforeSpeed = speed
    elseif gap < 0 then
        self.SpeedLevel = self.SpeedLevel - 1
        if self.SpeedLevel < MIN_SPEED_LEVEL then
            self.SpeedLevel = MIN_SPEED_LEVEL
        end
        local f7148_local0 = self
        speed = self.GetSpeed(f7148_local0)
        if speed < stick_level then
            speed = stick_level
            self.SpeedLevel = self.SpeedLevel + 1
        end
        self.BeforeSpeed = speed
    else
        speed = self.BeforeSpeed
    end
    self.MoveCount = self.MoveCount + 1
    return speed
    
end

SpeedControll.SetSpeedZero = function (self)
    self.Speed = REG4294967295
    self.BeforeSpeed = REG4294967295
    self.SpeedLevel = REG4294967295
    self.StopCount = REG4294967295
    self.DashPenaltyCount = REG4294967295
    self.StaminaCount = REG4294967295
    self.MoveCount = REG4294967295
    
end

Stick = {}
Stick.New = function ()
    local f7150_local0 = {}
    SETFIELD_R1 0 0 -1
    f7150_local0.Level = {}
    f7150_local0.Angle = {}
    local f7150_local1 = setmetatable
    local f7150_local2 = f7150_local0
    local f7150_local3 = {}
    f7150_local3.__index = Stick
    f7150_local1(f7150_local2, f7150_local3)
    return f7150_local0
    
end

LEFT_STICK_BUFFER_SIZE = 20
Stick.ReserveLStick = function (self)
    self.Count = self.Count + 1
    if self.Count > LEFT_STICK_BUFFER_SIZE then
        self.Count = REG4294967295
    end
    self.Level[self.Count] = g_MoveSpeedLevel
    self.Angle[self.Count] = g_TurnAngle
    
end

Stick.GetLStick = function (self, n)
    local pos = self.Count - n
    if pos < 1 then
        pos = LEFT_STICK_BUFFER_SIZE + pos
    end
    return self.Level[pos], self.Angle[pos]
    
end

global = {}
function dummy()
    
end

global.__index = function (table, element)
    return dummy
    
end

setmetatable(_G, global)

end
